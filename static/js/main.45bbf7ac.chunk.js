(this.webpackJsonpui=this.webpackJsonpui||[]).push([[0],{225:function(e,t,n){},227:function(e,t,n){},240:function(e,t){},249:function(e,t){},253:function(e,t,n){"use strict";n.r(t);var c,a=n(0),s=n.n(a),r=n(111),i=n.n(r),o=(n(225),n(43)),l=n(6),j=n.n(l),d=n(155),b=n(14),h=n(183),u=(n(227),n(304)),O=n(115),f=n(284),x=n(300),p=n(285),m=n(305),g=n(203),v=n(306),S=n(286),y=n(299),C=n(302),w=n(307),B=n(297),P=n(277),k=n(184),z=n.n(k),T=n(37),$=n(13),H=function(e){var t=e.isOpen,n=e.isClose,c=e.membershipProof,a=Object(T.f)();return Object($.jsxs)(B.a,{isOpen:t,onClose:n,children:[Object($.jsx)(B.g,{}),Object($.jsxs)(B.d,{children:[Object($.jsx)(B.f,{children:"Certificate"}),Object($.jsx)(B.c,{}),Object($.jsx)(B.b,{children:Object($.jsx)(P.a,{children:Object($.jsx)(z.a,{value:c})})}),Object($.jsx)(B.e,{children:Object($.jsx)(g.a,{variant:"ghost",onClick:function(){return a.push("/".concat(c))},children:"Print"})})]})]})},_=n(190),I=n(83),M=Object(y.a)(c||(c=Object(h.a)(["\n    query GetUsers($balance_gt: Int!, $balance_lt: Int!, $size: Int!) {\n        users(\n            first: $size\n            where: { balance_gt: $balance_gt, balance_lt: $balance_lt }\n        ) {\n            address\n            balance\n        }\n    }\n"]))),W=function(){var e,t,n,c=Object(a.useState)(100),s=Object(b.a)(c,2),r=s[0],i=s[1],l=Object(a.useState)(200),h=Object(b.a)(l,2),y=h[0],B=h[1],P=Object(a.useState)(200),k=Object(b.a)(P,2),z=k[0],T=k[1],W=Object(a.useState)(!1),X=Object(b.a)(W,2),J=X[0],E=X[1],A=Object(a.useState)(!1),D=Object(b.a)(A,2),F=D[0],U=D[1],q=Object(a.useState)("345345tsdfga"),G=Object(b.a)(q,2),N=G[0],L=G[1],Q=Object(a.useState)({}),R=Object(b.a)(Q,2),K=R[0],Z=R[1],V=(new _.a.providers.Web3Provider(null===(e=window)||void 0===e?void 0:e.ethereum).getSigner(),null===(t=window)||void 0===t||null===(n=t.ethereum)||void 0===n?void 0:n.request({method:"eth_requestAccounts"}).then((function(){console.log("accounts",V[0]),V.length&&V[0]}))),Y=Object(C.a)(M,{fetchPolicy:"network-only"}),ee=Object(b.a)(Y,2),te=ee[0],ne=ee[1],ce=ne.data,ae=ne.loading;return Object(a.useEffect)((function(){if(console.log("data",ce),ce){var e={proofHash:"dfsdf",minUsdc:r,maxUsdc:y,setSize:z,addressSet:{data:ce}},t={method:"GET",headers:{"Content-Type":"application/json"}};console.log("data",ce);var n=new Map,c=new Map,a=ce.users.map((function(e){return fetch("https://api.etherscan.io/api?module=account&action=txlist&address=".concat(e.address,"&startblock=0&endblock=99999999&page=1&offset=10&sort=asc&apikey=9SQ26N4VERJTXBWXQ4H94X4X98UZ4VFPHB"),t).then(function(){var t=Object(d.a)(j.a.mark((function t(a){var s;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.json();case 2:s=t.sent,n.set(e.address,s.result[0].hash),c.set(s.result[0].hash,e.address);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}));Object(d.a)(j.a.mark((function e(){var t,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(a);case 2:e.sent,new Map,t=Object(o.a)(n.keys()).map((function(e){return n.get(e)})),c=t.map((function(e,t){return'{"jsonrpc":"2.0","method":"eth_getTransactionByHash","params":["'.concat(e,'"],"id":').concat(t,"}")})),console.log("["+c+"]"),fetch("https://eth-mainnet.alchemyapi.io/v2/wCzaTDAfLI6S5Mdc2suiOXcpf7Xzlk_w",{method:"POST",body:"["+c+"]"}).then((function(e){return e.json()})).then((function(e){console.log(e),e.map((function(e){var t=I.utils.joinSignature({v:e.result.v,r:e.result.r,s:e.result.s}),n=I.utils.recoverPublicKey(e.result.hash,t);console.log(n)}))}));case 8:case"end":return e.stop()}}),e)})))(),function(e){var t={method:"POST",headers:{"Content-Type":"application/json","X-Master-Key":"$2b$10$rJt/jHy0W/OoJaX3Som3lu7NepipWzBp/QviO0c28o8Zad0.0RHaO"},body:JSON.stringify(e)};return fetch("https://api.jsonbin.io/v3/b",t).then((function(e){return e.json()}))}(e).then((function(e){console.log(e),L(e.metadata.id),E(!0)}))}}),[ce]),Object($.jsxs)(u.a,{children:[Object($.jsxs)(O.a,{id:"min",isRequired:!0,children:[Object($.jsx)(f.a,{mt:10,children:"Minimum USDC Balance"}),Object($.jsx)(x.c,{min:0,color:"tomato",variant:"filled",onChange:function(e){return i(parseInt(e))},children:Object($.jsx)(x.d,{style:{fontWeight:"bold"}})})]}),Object($.jsxs)(O.a,{id:"max",children:[Object($.jsx)(f.a,{children:"Maximum USDC Balance"}),Object($.jsx)(x.c,{color:"tomato",variant:"filled",min:0,onChange:function(e){return B(parseInt(e))},children:Object($.jsx)(x.d,{style:{fontWeight:"bold"}})})]}),Object($.jsxs)(O.a,{id:"address",children:[Object($.jsx)(f.a,{children:"Size of Address Set"}),Object($.jsxs)(x.c,{color:"tomato",variant:"filled",min:1,max:5,onChange:function(e){T(parseInt(e)),console.log(z)},children:[Object($.jsx)(x.d,{}),Object($.jsxs)(x.e,{children:[Object($.jsx)(x.b,{}),Object($.jsx)(x.a,{})]})]})]}),Object($.jsxs)(O.a,{id:"amount",children:[Object($.jsx)(f.a,{children:"Your address"}),Object($.jsx)(x.c,{min:0,mb:10,onChange:function(e){console.log(e)},children:Object($.jsx)(p.a,{color:"tomato",variant:"filled",placeholder:"0xBc11295936Aa79d594139de1B2e12629414F3BDB",style:{fontWeight:"bold"}})})]}),Object($.jsxs)(m.a,{columns:2,spacing:5,children:[Object($.jsx)(g.a,{variant:"solid",colorScheme:"orange",isLoading:ae,onClick:function(){return te({variables:{balance_gt:r,balance_lt:y,size:z}})},children:"Generate Proof"}),Object($.jsx)(g.a,{disabled:!J,onClick:function(){Z({minBalance:r,maxBalance:y,size:z}),U(!0)},children:"Mint certificate"})]}),J&&Object($.jsxs)(v.a,{status:"success",variant:"subtle",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center",height:"200px",children:[Object($.jsx)(v.c,{boxSize:"40px",mr:0}),Object($.jsx)(v.d,{mt:4,mb:1,fontSize:"lg",children:"Proof generated!"}),Object($.jsxs)(v.b,{maxWidth:"sm",children:[N," ",console.log(K),Object($.jsx)(S.a,{"aria-label":"copy",colorScheme:"green",size:"xs",variant:"outline",icon:Object($.jsx)(w.a,{})})]})]}),Object($.jsx)(H,{isOpen:F,isClose:function(){return U(!1)},membershipProof:N})]})},X=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,309)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,s=t.getLCP,r=t.getTTFB;n(e),c(e),a(e),s(e),r(e)}))},J=n(303),E=n(295),A=n(287),D=n(296),F=n(298),U=n(301),q=n(294),G=n(288),N=function(){return Object($.jsxs)(A.a,{bg:"orange.500",w:"100%",p:4,mt:20,children:["Crafted by the"," ",Object($.jsx)(G.a,{href:"https://nethermind.io/",isExternal:!0,children:"Nethermind team"})]})},L=n(121),Q=n(289),R=function(e){var t=e.users;return t&&Object($.jsxs)(Q.a,{variant:"simple",mt:20,colorScheme:"orange",children:[Object($.jsx)(Q.d,{children:Object($.jsxs)(Q.e,{children:[Object($.jsx)(Q.c,{children:"Address"}),Object($.jsx)(Q.c,{children:"Balance"})]})}),Object($.jsx)(Q.b,{children:t.map((function(e){return Object($.jsxs)(Q.e,{children:[Object($.jsx)(Q.c,{children:e.address}),Object($.jsx)(Q.c,{children:e.balance})]})}))})]})},K=function(){var e=Object(T.g)().proofHash,t=Object(a.useState)([]),n=Object(b.a)(t,2),c=n[0],s=n[1];return console.log("proofHash",e),Object(a.useEffect)((function(){(function(e){return fetch("https://api.jsonbin.io/v3/b/".concat(e,"/latest"),{method:"GET",headers:{"Content-Type":"application/json","X-Master-Key":"$2b$10$rJt/jHy0W/OoJaX3Som3lu7NepipWzBp/QviO0c28o8Zad0.0RHaO"}}).then((function(e){return e.json()}))})(e).then((function(e){s(e.record.addressSet.data.users)}))}),[]),Object($.jsx)(R,{users:c})},Z=new F.a({uri:"https://api.thegraph.com/subgraphs/name/centrehq/usdc",cache:new U.a});i.a.render(Object($.jsx)(s.a.StrictMode,{children:Object($.jsx)(J.a,{children:Object($.jsx)(q.a,{client:Z,children:Object($.jsxs)(E.a,{style:{height:"100vh"},direction:"column",justifyContent:"space-between",children:[Object($.jsx)(A.a,{bgGradient:"linear(to-b, orange.50, transparent)",children:Object($.jsx)(D.a,{children:Object($.jsxs)(u.a,{children:[Object($.jsx)("img",{src:"./logo.svg",alt:""}),Object($.jsx)(L.a,{basename:"/proof-of-membership",children:Object($.jsxs)(T.c,{children:[Object($.jsx)(T.a,{path:"/:proofHash",children:Object($.jsx)(K,{})}),Object($.jsx)(T.a,{path:"/",children:Object($.jsx)(W,{})})]})})]})})}),Object($.jsx)(N,{})]})})})}),document.getElementById("root")),X()}},[[253,1,2]]]);
//# sourceMappingURL=main.45bbf7ac.chunk.js.map